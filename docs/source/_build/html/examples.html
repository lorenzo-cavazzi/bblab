
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Examples &#8212; bblab  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Api" href="modules.html" />
    <link rel="prev" title="Install" href="install.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Api"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Install"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">bblab  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>You can start from these examples to explore the library. The next topic
<a class="reference internal" href="modules.html"><span class="doc">Api</span></a> lists all available methods with their parameters and
some other examples.</p>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>Start python and import the library you have <a class="reference internal" href="install.html"><span class="doc">previously installed</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bblab</span>
</pre></div>
</div>
<p>You can download and use the
<a class="reference external" href="https://github.com/lorenzo-cavazzi/bblab/tree/master/data">set of sample data</a>
provided. In the following examples we assume you saved them in a <cite>data</cite> folder</p>
<div class="section" id="assignment">
<h3>Assignment<a class="headerlink" href="#assignment" title="Permalink to this headline">¶</a></h3>
<p>The original assignment has 3 steps. Here are the instructions to execute them.
We assume Tiff files from our sample set to be available in <cite>data/1i_channels</cite> and
<cite>data/2i_mask</cite> folders. We will save the output of each step in these folders:
<cite>data/output1</cite>, <cite>data/output2</cite> and <cite>data/output3</cite>.</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Overlay channels</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bblab.image</span> <span class="k">import</span> <span class="n">processing</span> <span class="c1"># or use bblab.image.processing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">overlay_channels</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;data/1i_channels&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/output1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Highlight cells</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">highlight_cells</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;data/output1&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/2i_mask&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/output2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Compute means</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">compute_mean</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;data/output2&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/output3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
<p>You may verify each step results in the <cite>data/output[x]</cite> folders</p>
</div>
<div class="section" id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<p>The final Csv file containing channels means may be significative because it preserves
all the information from the Tiff channels without modifying it. Nevertheless, the output
images are not very interesting at a first glance because they are too dark to allow
humans to identity any features.</p>
<p>There are a number of parameters to modify channels intensity. We can try to maximize
all of them, and further applying a multiplier on every single channel</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">overlay_channels</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;data/1i_channels&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/output1&quot;</span><span class="p">,</span>
<span class="go">        maximize_intensity = True, r_channel_multiplier = 50,</span>
<span class="go">        g_channel_multiplier = 2, b_channel_multiplier = 5)</span>
</pre></div>
</div>
<p>Now the cells appear more identifiable, but we lose some information in the process:
some full-green pixels are in fact from intensities that were originally different
by a factor 10 or more.</p>
<p>We can also improve the cell highlighting by applying an algorithm that tries to
preserve the information about single pixel cells identification. This time we will
lose the correspondence between original cell id and final transparency channel value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">highlight_cells</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;data/output1&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/2i_mask&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;data/output2&quot;</span><span class="p">,</span>
<span class="go">        cells_highlight = 2)</span>
</pre></div>
</div>
<p>We can easily identify the cells. Given a transparency channel of 16 bits, the
difference of up to 680 (the number of different cells) is negligible for a human
eye.</p>
<p>The final step yields to different numbers, but this is inevitable if we always
take only the Png images from the previous step because we lost information in
the first step.</p>
</div>
</div>
<div class="section" id="command-line">
<h2>Command line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h2>
<p>Currently it’s possible to invoke bblab functions from the command line using
<cite>python -c</cite> command on both Windows and Linux systems.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import bblab; bblab.image.processing.overlay_channels(r&#39;data/1i_channels&#39;, r&#39;data/output1&#39;)&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="explore">
<h2>Explore<a class="headerlink" href="#explore" title="Permalink to this headline">¶</a></h2>
<p>You can play with the values in the examples to obtain different results. The next topic
lists all available methods with their parameters and some other examples. Enjoy :)</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Examples</a><ul>
<li><a class="reference internal" href="#python">Python</a><ul>
<li><a class="reference internal" href="#assignment">Assignment</a></li>
<li><a class="reference internal" href="#improvements">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-line">Command line</a></li>
<li><a class="reference internal" href="#explore">Explore</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Install</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">Api</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/examples.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Api"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Install"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">bblab  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Lorenzo Cavazzi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>